{% extends 'base.html' %}

{% block header %}
  <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center task_name">
  <h1 class="display-4">{% block title %}{{ task }}{% endblock %}</h1>
  </div>
{% endblock %}
{% block content %}

<div class="container">
  <div class="card mb-4 shadow-sm">
    <div class="card-header">
      <button type="button" id="start" class="start_pause btn btn-lg btn-block btn-outline-primary" onclick="countdown()">Begin!</button>
    </div>
    <div class="card-body timer">
      <div class="card-body time_display" id="minutes">
        <p id="user_time">{{ time }}</p>
      </div>
      <div class="card-body colon">
        <p>:</p>
      </div>
      <div class="card-body time_display" id="seconds">
        <p>00</p>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="card mb-4 shadow-sm">
    <form method="post">
      <div class="card-header add_time">
        <button type="button" id="add_five" name="add_five" class="btn btn-lg btn-outline-primary" onclick="add_time(5)">
        Add 5 Minutes
        </button>
        <button type="button" id="add_fifteen" name="add_fifteen" class="btn btn-lg btn-outline-primary" onclick="add_time(15)">
        Add 15 Minutes
        </button>
      </div>
      <div class="card-header complete">
        <button type="submit" name="finish" class="btn btn-lg btn-outline-primary" onclick="finish()">
          Finished!
        </button>
      </div>
    </form>
  </div>
</div>


<script src="{{ url_for('static', filename='js/timer.js') }}"></script>
<script>
$(function() {
	$("#add_five").click(function() {
		console.log('Before ajax');
		$.ajax({
			url: '{{ url_for('timer.five', id=g.user['id'], task_id=task_id) }}',
			type: 'POST',
			data: 5,
		});
		console.log('after ajax');
		return false;
	});
	$("#add_fifteen").click(function() {
		console.log('Before ajax');
		$.ajax({
			url: '{{ url_for('timer.fifteen', id=g.user['id'], task_id=task_id) }}',
			type: 'POST',
			data: 5,
		});
		console.log('after ajax');
		return false;
	});
});
</script>
{% endblock %}
